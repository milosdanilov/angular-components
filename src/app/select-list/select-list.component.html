<app-filter
  *ngIf="allowFilter"
  (searchChange)="search$.next($event)"
></app-filter>

<div *ngIf="!allowMultiple">
  <ng-content></ng-content>
</div>

<div class="list-group mx-0">
  <label
    *ngFor="let listItem of filteredItems"
    class="list-group-item d-flex gap-2"
  >
    <input
      *ngIf="allowMultiple"
      class="form-check-input flex-shrink-0"
      type="checkbox"
      [(ngModel)]="listItem.value"
      (ngModelChange)="onListChange()"
    />
    <input
      *ngIf="!allowMultiple"
      class="form-check-input flex-shrink-0"
      type="radio"
      name="select-list-item"
      [value]="listItem.id"
      [ngModel]="selectedListItem?.id"
      (ngModelChange)="onSingleChange($event)"
    />

    <ng-container
      [ngTemplateOutlet]="listItemTemplateRef"
      [ngTemplateOutletContext]="{ $implicit: listItem }"
    ></ng-container>
  </label>
</div>
